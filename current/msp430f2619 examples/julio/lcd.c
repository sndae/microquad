// ************************************************************************
// **                                                                    **
// **  BIBLIOTECA DO DISPLAY LCD NOKIA 5110/5120                         **
// **                                                                    **
// **  Esta biblioteca implementa as rotinas para um display grafico     **
// **  da Nokia com resolucao de 48x84 pixels. Este display utiliza o    **
// **  controlador da Philips PCF8533. As rotinas emulam um LCD com      **
// **  resulucao de 14x6 caracteres para um fonte de 7x5 pixels. As      **
// **  rotinas foram escritas para um microcontrolador trabalhando       **
// **  em 11.0592MHz!!!                                                  **
// **                                                                    **
// **  (C) by JCLima, 29/10/2005                                         **
// **                                                                    **
// ************************************************************************

#include <msp430x2619.h>
#include "lcd.h"
#include "delay.h"


//
//  Tabela ASCII do fonte 7x5
//
code char asciitable[] = {
                            0x00,0x00,0x00,0x00,0x00,
                            0x3E,0x0A,0x34,0x00,0x3E,
                            0x18,0x3E,0x00,0x3E,0x22,
                            0x00,0x3E,0x20,0x20,0x00,
                            0x22,0x1C,0x00,0x24,0x2A,
                            0x00,0x08,0x38,0x38,0x08,
                            0x1C,0x22,0x22,0x22,0x1C,
                            0x00,0x38,0x38,0x44,0x82,
                            0x1C,0x3E,0x62,0x62,0x32,
                            0x2E,0x26,0x23,0x23,0x22,
                            0x00,0x00,0x00,0x00,0x00,
                            0x1C,0x3E,0x36,0x22,0x36,
                            0x3E,0x3E,0x36,0x36,0x36,
                            0x00,0x00,0x00,0x00,0x00,
                            0x18,0x08,0x1C,0x22,0x22,
                            0x63,0x55,0x4D,0x55,0x6B,
                            0x00,0x3E,0x0A,0x04,0x78,
                            0x00,0x3E,0x0A,0x04,0x78,
                            0x00,0x38,0x44,0x5F,0x4E,
                            0x00,0x38,0x44,0x44,0x5F,
                            0x00,0x3C,0x3C,0x3C,0x3C,
                            0x00,0x3E,0x0A,0x04,0x78,
                            0x00,0x3E,0x0A,0x04,0x78,
                            0x44,0x40,0x38,0x00,0x04,
                            0x00,0x7F,0x3E,0x1C,0x08,
                            0x08,0x08,0x2A,0x1C,0x08,
                            0x08,0x1C,0x2A,0x08,0x08,
                            0x08,0x08,0x2A,0x08,0x08,
                            0x00,0x3C,0x20,0x00,0x00,
                            0x08,0x14,0x00,0x14,0x08,
                            0x08,0x0C,0x0E,0x0C,0x08,
                            0x08,0x18,0x38,0x18,0x08,
                            
                            0x00,0x00,0x00,0x00,0x00,
                            0x00,0x00,0x5F,0x00,0x00,
                            0x00,0x07,0x00,0x07,0x00,
                            0x14,0x7F,0x14,0x7F,0x14,
                            0x24,0x2A,0x7F,0x2A,0x12,
                            0x23,0x13,0x08,0x64,0x62,
                            0x36,0x49,0x55,0x22,0x50,
                            0x00,0x05,0x03,0x00,0x00,
                            0x00,0x1C,0x22,0x41,0x00,
                            0x00,0x41,0x22,0x1C,0x00,
                            0x14,0x08,0x3E,0x08,0x14,
                            0x08,0x08,0x3E,0x08,0x08,
                            0x00,0x50,0x30,0x00,0x00,
                            0x08,0x08,0x08,0x08,0x08,
                            0x00,0x60,0x60,0x00,0x00,
                            0x20,0x10,0x08,0x04,0x02,
                            0x3E,0x51,0x49,0x45,0x3E,
                            0x00,0x42,0x7F,0x40,0x00,
                            0x42,0x61,0x51,0x49,0x46,
                            0x21,0x41,0x45,0x4B,0x31,
                            0x18,0x14,0x12,0x7F,0x10,
                            0x27,0x45,0x45,0x45,0x39,
                            0x3C,0x4A,0x49,0x49,0x30,
                            0x01,0x71,0x09,0x05,0x03,
                            0x36,0x49,0x49,0x49,0x36,
                            0x06,0x49,0x49,0x29,0x1E,
                            0x00,0x36,0x36,0x00,0x00,
                            0x00,0x56,0x36,0x00,0x00,
                            0x08,0x14,0x22,0x41,0x00,
                            0x14,0x14,0x14,0x14,0x14,
                            0x00,0x41,0x22,0x14,0x08,
                            0x02,0x01,0x51,0x09,0x06,
                            0x32,0x49,0x79,0x41,0x3E,
                            0x7E,0x11,0x11,0x11,0x7E,
                            0x7F,0x49,0x49,0x49,0x36,
                            0x3E,0x41,0x41,0x41,0x22,
                            0x7F,0x41,0x41,0x22,0x1C,
                            0x7F,0x49,0x49,0x49,0x41,
                            0x7F,0x09,0x09,0x09,0x01,
                            0x3E,0x41,0x49,0x49,0x7A,
                            0x7F,0x08,0x08,0x08,0x7F,
                            0x00,0x41,0x7F,0x41,0x00,
                            0x20,0x40,0x41,0x3F,0x01,
                            0x7F,0x08,0x14,0x22,0x41,
                            0x7F,0x40,0x40,0x40,0x40,
                            0x7F,0x02,0x0C,0x02,0x7F,
                            0x7F,0x04,0x08,0x10,0x7F,
                            0x3E,0x41,0x41,0x41,0x3E,
                            0x7F,0x09,0x09,0x09,0x06,
                            0x3E,0x41,0x51,0x21,0x5E,
                            0x7F,0x09,0x19,0x29,0x46,
                            0x46,0x49,0x49,0x49,0x31,
                            0x01,0x01,0x7F,0x01,0x01,
                            0x3F,0x40,0x40,0x40,0x3F,
                            0x1F,0x20,0x40,0x20,0x1F,
                            0x3F,0x40,0x38,0x40,0x3F,
                            0x63,0x14,0x08,0x14,0x63,
                            0x07,0x08,0x70,0x08,0x07,
                            0x61,0x51,0x49,0x45,0x43,
                            0x00,0x7F,0x41,0x41,0x00,
                            0x02,0x04,0x08,0x10,0x20,
                            0x00,0x41,0x41,0x7F,0x00,
                            0x04,0x02,0x01,0x02,0x04,
                            0x40,0x40,0x40,0x40,0x40,
                            0x00,0x01,0x02,0x04,0x00,
                            0x20,0x54,0x54,0x54,0x78,
                            0x7F,0x48,0x44,0x44,0x38,
                            0x38,0x44,0x44,0x44,0x20,
                            0x38,0x44,0x44,0x48,0x7F,
                            0x38,0x54,0x54,0x54,0x18,
                            0x08,0x7E,0x09,0x01,0x02,
                            0x0C,0x52,0x52,0x52,0x3E,
                            0x7F,0x08,0x04,0x04,0x78,
                            0x00,0x44,0x7D,0x40,0x00,
                            0x20,0x40,0x44,0x3D,0x00,
                            0x7F,0x10,0x28,0x44,0x00,
                            0x00,0x41,0x7F,0x40,0x00,
                            0x7C,0x04,0x18,0x04,0x78,
                            0x7C,0x08,0x04,0x04,0x78,
                            0x38,0x44,0x44,0x44,0x38,
                            0x7C,0x14,0x14,0x14,0x08,
                            0x08,0x14,0x14,0x18,0x7C,
                            0x7C,0x08,0x04,0x04,0x08,
                            0x48,0x54,0x54,0x54,0x20,
                            0x04,0x3F,0x44,0x40,0x20,
                            0x3C,0x40,0x40,0x20,0x7C,
                            0x1C,0x20,0x40,0x20,0x1C,
                            0x3C,0x40,0x30,0x40,0x3C,
                            0x44,0x28,0x10,0x28,0x44,
                            0x0C,0x50,0x50,0x50,0x3C,
                            0x44,0x64,0x54,0x4C,0x44,
                            0x00,0x00,0x36,0x41,0x00,
                            0x00,0x00,0x7F,0x00,0x00,
                            0x00,0x41,0x36,0x08,0x00,
                            0x10,0x08,0x08,0x10,0x08,
                            0x78,0x46,0x41,0x46,0x78,
                         };


code char abertura[] = 
                {
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x80, 0x70, 0x4E, 0x41, 0x61,
                0x1D, 0x03, 0xA0, 0x90, 0xD0, 0x20,
                0x80, 0x70, 0x20, 0x10, 0x30, 0x00,
                0xA0, 0x90, 0xD0, 0x20, 0x00, 0x00,
                0x00, 0xC0, 0x20, 0x10, 0xD0, 0x30,
                0x80, 0x60, 0x10, 0x80, 0x60, 0x90,
                0xE0, 0x90, 0xD0, 0x30, 0x80, 0x70,
                0x20, 0xF0, 0x30, 0x20, 0xD0, 0x30,
                0x00, 0x00, 0x00, 0x00, 0xA0, 0x90,
                0xD0, 0x20, 0xC0, 0x20, 0x10, 0x10,
                0x30, 0x80, 0x78, 0x26, 0xA0, 0x60,
                0x00, 0xA0, 0x90, 0xD0, 0x20, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x0C, 0x03, 0x00, 0x00, 0x00, 0x00,
                0x0E, 0x09, 0x04, 0x0F, 0x00, 0x0C,
                0x03, 0x00, 0x00, 0x00, 0x0E, 0x09,
                0x04, 0x0F, 0x00, 0x00, 0x00, 0x00,
                0x0E, 0xC9, 0x38, 0x07, 0x00, 0x0E,
                0x09, 0x08, 0x06, 0x01, 0x0E, 0x09,
                0x08, 0x06, 0x00, 0x0C, 0x03, 0x00,
                0x0E, 0x01, 0x00, 0x0F, 0x00, 0x00,
                0x00, 0x00, 0x0E, 0x09, 0x04, 0x0F,
                0x00, 0x0E, 0x09, 0x08, 0x04, 0x00,
                0x0C, 0x03, 0x00, 0x0E, 0x01, 0x0E,
                0x09, 0x04, 0x0F, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0xC0,
                0xF0, 0x00, 0x00, 0x80, 0xE0, 0x30,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x04, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x80, 0x70, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xE0, 0x10, 0x10, 0xD0, 0x30, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x80,
                0x70, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xE0, 0x9C, 0x83, 0x71, 0x0F, 0x00,
                0x00, 0x00, 0xC0, 0x38, 0x06, 0x01,
                0x1F, 0xC4, 0x33, 0x0F, 0xE1, 0x98,
                0x87, 0x60, 0x18, 0xC7, 0x38, 0x07,
                0xE2, 0x1D, 0xE3, 0x9C, 0x82, 0x71,
                0x0D, 0xE3, 0x9C, 0x82, 0x71, 0x0D,
                0x03, 0x00, 0x00, 0xC0, 0xB8, 0x87,
                0x80, 0x74, 0x0C, 0xC0, 0x38, 0x07,
                0x02, 0x01, 0xE3, 0x90, 0x4A, 0xF9,
                0x0D, 0xE2, 0x18, 0x07, 0xE2, 0x1D,
                0xE3, 0x9C, 0x82, 0x71, 0x0D, 0xE3,
                0x9C, 0x8A, 0x49, 0x0D, 0x03, 0x80,
                0x00, 0x80, 0x00, 0x80, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00
                };


code char mapamundi[] = 
                {
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x80, 0x00, 0x00, 0x10,
                0x90, 0x80, 0x00, 0x00, 0x04, 0x80,
                0x80, 0x00, 0x00, 0x02, 0x02, 0x02,
                0x02, 0x02, 0x82, 0x02, 0x00, 0x02,
                0x02, 0x04, 0x00, 0x08, 0x08, 0x00,
                0x20, 0x00, 0x40, 0x80, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x20, 0x00, 0x00,
                0x00, 0x00, 0x04, 0x02, 0x02, 0x00,
                0x82, 0xC2, 0xC2, 0x02, 0x82, 0xC2,
                0xC2, 0x82, 0x80, 0x80, 0x02, 0x02,
                0x04, 0x04, 0x04, 0x08, 0x08, 0x10,
                0x10, 0x20, 0x40, 0x80, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x40, 0x08, 0x00,
                0x00, 0x01, 0x00, 0x00, 0xC0, 0xE1,
                0xF1, 0xF0, 0xE0, 0x80, 0xE1, 0xE0,
                0xE4, 0xE0, 0xF0, 0xE0, 0xD8, 0xFE,
                0xFE, 0xFF, 0xFF, 0xFE, 0xFC, 0xFC,
                0xF8, 0xF0, 0xF8, 0xF8, 0xF8, 0xF0,
                0xF0, 0xF0, 0x60, 0x00, 0x01, 0x00,
                0x00, 0x00, 0x00, 0x00, 0xE0, 0xF0,
                0xF0, 0xF0, 0xF0, 0xF0, 0xE0, 0xED,
                0xDB, 0xDE, 0xE9, 0xF0, 0xE3, 0x27,
                0x17, 0x77, 0x67, 0x0F, 0x7F, 0xFF,
                0x7F, 0x1E, 0xC0, 0x40, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x01, 0x02,
                0x04, 0x18, 0x60, 0x80, 0x00, 0x00,
                0x00, 0xF0, 0x0F, 0x00, 0x00, 0x00,
                0x00, 0x80, 0x82, 0xCC, 0xDE, 0x9F,
                0x1F, 0x9F, 0xBF, 0x7F, 0xFF, 0xFF,
                0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
                0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F,
                0x1F, 0x4F, 0x61, 0x00, 0x00, 0x01,
                0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x04, 0x02, 0x01, 0x01,
                0x01, 0x01, 0x03, 0x07, 0x3F, 0xFF,
                0xFF, 0xFF, 0xFF, 0xFF, 0xFC, 0xF8,
                0x7E, 0x3F, 0x1E, 0x0C, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00,
                0x00, 0x1F, 0x60, 0x00, 0x00, 0x00,
                0x06, 0x0F, 0x0F, 0x1F, 0xFF, 0xFF,
                0xFF, 0xFF, 0xFF, 0x3F, 0x8F, 0x02,
                0x00, 0x00, 0x01, 0x03, 0x03, 0x01,
                0x01, 0x07, 0x03, 0x71, 0x39, 0x08,
                0x20, 0x20, 0x20, 0x40, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x01, 0x03, 0x07, 0x05, 0x0D, 0xF8,
                0xF0, 0xF8, 0xF8, 0xF0, 0xE0, 0xE0,
                0xE0, 0xE0, 0xC0, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0xF0, 0x0F, 0x00,
                0x00, 0x00, 0x01, 0x06, 0x18, 0x00,
                0x40, 0x00, 0x00, 0x00, 0x00, 0x03,
                0x0F, 0x07, 0x03, 0x00, 0x01, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x0C, 0x0E,
                0x07, 0x0F, 0x0F, 0x1E, 0x0C, 0x00,
                0x40, 0x20, 0x00, 0x00, 0x80, 0x80,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xF1, 0xFF, 0x7F, 0x1F, 0x0F, 0x07,
                0x07, 0x03, 0x01, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x80, 0x40,
                0x20, 0x18, 0x06, 0x01, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x02, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x20, 0x20,
                0x00, 0x40, 0x40, 0x40, 0x40, 0x40,
                0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
                0x40, 0x00, 0x00, 0x20, 0x00, 0x08,
                0x00, 0x00, 0x02, 0x01, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x08, 0x00, 0x00,
                0x20, 0x00, 0x20, 0x40, 0x40, 0x40,
                0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
                0x43, 0x47, 0x4C, 0x40, 0x40, 0x40,
                0x20, 0x20, 0x20, 0x10, 0x10, 0x08,
                0x08, 0x04, 0x02, 0x01, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00
                };


code char logo[] = 
                {
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x80, 0xC0, 0xE0, 0xE0, 0xF0,
                0xF8, 0xF8, 0x3C, 0xBC, 0x9A, 0x16,
                0x06, 0x0E, 0x8F, 0x9F, 0x1F, 0x1F,
                0x1F, 0x9F, 0x8F, 0x0E, 0x06, 0x96,
                0x9A, 0x3C, 0x3C, 0xF8, 0xF8, 0xF0,
                0xE0, 0xE0, 0xC0, 0x80, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0xC0, 0xF0, 0xF8, 0xFE,
                0xFB, 0xF7, 0xF7, 0xEF, 0xEF, 0xDF,
                0xC3, 0xC0, 0x80, 0x88, 0x8F, 0x88,
                0x80, 0x01, 0x0A, 0x0A, 0x07, 0x00,
                0x07, 0x08, 0x08, 0x07, 0x80, 0x88,
                0x8A, 0x85, 0x80, 0xC0, 0xC3, 0xDF,
                0xEF, 0xEF, 0xF7, 0xF7, 0xFB, 0xFE,
                0xF8, 0xF0, 0xC0, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xF0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
                0x7F, 0xBF, 0xDF, 0xDF, 0xDF, 0xBF,
                0xFF, 0x1F, 0xDF, 0xDF, 0xDF, 0x3F,
                0xFF, 0x17, 0xDB, 0xDB, 0xD7, 0xFF,
                0x1F, 0xBF, 0x7F, 0xFF, 0x7F, 0xBF,
                0x1F, 0xFF, 0x1F, 0xFF, 0x3F, 0xDF,
                0xDF, 0xDF, 0xDF, 0x3F, 0xFF, 0xFF,
                0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
                0xF8, 0xF7, 0xEF, 0xED, 0xED, 0xF1,
                0xFF, 0xE0, 0xFD, 0xF9, 0xF5, 0xEE,
                0xFF, 0xE0, 0xEE, 0xEE, 0xEF, 0xFF,
                0xE0, 0xFF, 0xFF, 0xFC, 0xFF, 0xFF,
                0xE0, 0xFF, 0xE0, 0xFF, 0xF0, 0xEF,
                0xEF, 0xEF, 0xEF, 0xF0, 0xFF, 0xFF,
                0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x03, 0x0F, 0x1F, 0x7F,
                0xDF, 0xEF, 0xEF, 0xF7, 0xF7, 0xFB,
                0xC3, 0x03, 0x01, 0xF9, 0x29, 0x09,
                0x01, 0xF8, 0xA8, 0xA8, 0x50, 0x00,
                0xF8, 0x28, 0x28, 0x10, 0x01, 0xF1,
                0x29, 0x29, 0xF1, 0x03, 0xC3, 0xFB,
                0xF7, 0xF7, 0xEF, 0xEF, 0xDF, 0x7F,
                0x1F, 0x0F, 0x03, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x01, 0x03, 0x07, 0x07, 0x0F,
                0x1F, 0x1F, 0x3C, 0x3C, 0x58, 0x68,
                0x60, 0x70, 0xF0, 0xF8, 0xF8, 0xF8,
                0xF8, 0xF8, 0xF0, 0x70, 0x60, 0x68,
                0x58, 0x3C, 0x3C, 0x1F, 0x1F, 0x0F,
                0x07, 0x07, 0x03, 0x01, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00
                };


code char slogan[] = 
                {
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x80, 0xC0, 0xE0, 0xF0,
                0x30, 0x38, 0x18, 0x18, 0x78, 0x78,
                0x78, 0x70, 0x00, 0x00, 0xE0, 0xF8,
                0xF8, 0x78, 0x18, 0x18, 0x98, 0xF8,
                0xF8, 0x78, 0x00, 0x00, 0xC0, 0xF8,
                0xF8, 0x78, 0x18, 0x1A, 0x19, 0x19,
                0x1B, 0x18, 0x18, 0x00, 0xE0, 0xF8,
                0xF8, 0xF8, 0xF8, 0x18, 0x00, 0x80,
                0xE0, 0xF8, 0xF8, 0xF8, 0x78, 0x08,
                0x00, 0xC0, 0xF8, 0xF8, 0x78, 0x18,
                0x80, 0xC0, 0xE0, 0xF0, 0x30, 0x18,
                0x18, 0x18, 0x38, 0xF8, 0xF0, 0xE0,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x1E, 0x3F, 0x7F, 0x73, 0x60,
                0x60, 0x60, 0x73, 0x7B, 0x3F, 0x1F,
                0x0F, 0x60, 0x78, 0x7F, 0x7F, 0x0F,
                0x03, 0x07, 0x1F, 0x7F, 0x73, 0x61,
                0x01, 0x00, 0x70, 0x7E, 0x7F, 0x7F,
                0x63, 0x63, 0x63, 0x63, 0x63, 0x23,
                0x01, 0x60, 0x78, 0x7F, 0x1F, 0x03,
                0x70, 0x7F, 0x7F, 0x3C, 0x0F, 0x43,
                0x79, 0x7F, 0x1F, 0x03, 0x60, 0x78,
                0x7F, 0x7F, 0x1F, 0x03, 0x00, 0x1C,
                0x3F, 0x7F, 0x73, 0x60, 0x60, 0x70,
                0x30, 0x38, 0x1E, 0x0F, 0x07, 0x01,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x80, 0x80, 0x00, 0x00, 0x00, 0x00,
                0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0xF0,
                0x0F, 0x01, 0x0E, 0x70, 0x80, 0xF8,
                0x07, 0x00, 0xE0, 0x28, 0x24, 0xA4,
                0xF8, 0x00, 0x00, 0xF8, 0x0C, 0x04,
                0x84, 0xF8, 0x0F, 0x00, 0xE0, 0x28,
                0x24, 0xA4, 0xF8, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0xF0, 0x0C, 0x04,
                0x04, 0xCC, 0x30, 0x00, 0xF8, 0x04,
                0x04, 0x04, 0xC4, 0x38, 0x00, 0xF8,
                0x0C, 0x04, 0x84, 0xF8, 0x0F, 0x00,
                0xF0, 0x28, 0x24, 0x24, 0xA4, 0x18,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
                0x00, 0x00, 0x00, 0x01, 0x01, 0x00,
                0x01, 0x00, 0x00, 0x00, 0x01, 0x01,
                0x00, 0x01, 0x00, 0x00, 0x00, 0x01,
                0x01, 0xC0, 0xC1, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x8F, 0xC0, 0x01, 0x01,
                0x01, 0x00, 0x00, 0x00, 0x00, 0x01,
                0x41, 0x01, 0x00, 0x00, 0x00, 0x00,
                0x01, 0x01, 0x00, 0x01, 0x00, 0x00,
                0x00, 0x01, 0x01, 0x01, 0x00, 0xC0,
                0x00, 0x00, 0x00, 0xC0, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x60, 0x8C, 0x8A, 0x92,
                0x72, 0x04, 0x00, 0x78, 0x94, 0x92,
                0x92, 0x52, 0x0C, 0x00, 0x78, 0x06,
                0x02, 0x02, 0x00, 0x00, 0x00, 0x80,
                0x78, 0x07, 0x01, 0xFE, 0x40, 0x30,
                0x0C, 0xE3, 0x1F, 0x00, 0x70, 0x94,
                0x92, 0x52, 0xFC, 0x00, 0x00, 0x78,
                0x06, 0x00, 0x7C, 0x82, 0x82, 0x82,
                0x62, 0x1C, 0x00, 0x78, 0x06, 0x02,
                0x02, 0x00, 0x00, 0x80, 0x3C, 0x03,
                0x00, 0x80, 0x3C, 0x03, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00
                };

code char bal[] =
                {
                0x00, 0x00, 0x00, 0x00, 0x00, 0xC0,
                0x20, 0x10, 0x48, 0x88, 0x24, 0x04,
                0x14, 0x02, 0x0A, 0x02, 0x0A, 0x02,
                0x14, 0x04, 0x24, 0x08, 0x48, 0x10,
                0x20, 0xC0, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0xF8, 0x07, 0x50,
                0x04, 0x01, 0x00, 0x00, 0x01, 0x02,
                0x04, 0x08, 0x10, 0x60, 0x60, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
                0x14, 0x00, 0x07, 0xF8, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x07, 0x18,
                0x21, 0x44, 0x90, 0x80, 0x22, 0x02,
                0x40, 0x02, 0x42, 0x00, 0x02, 0x00,
                0x02, 0x02, 0x02, 0x80, 0x80, 0x40,
                0x20, 0x18, 0x07, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0xE0, 0x20, 0x20, 0x20,
                0x20, 0xC0, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xE0, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x01, 0x01,
                0x01, 0x02, 0xFE, 0xAE, 0xFE, 0x02,
                0x01, 0x01, 0x01, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x60, 0x5F, 0x42, 0x42, 0x42, 0x42,
                0x22, 0x1D, 0x00, 0x30, 0x4A, 0x49,
                0x49, 0x79, 0x0E, 0x00, 0x60, 0x1F,
                0x00, 0x30, 0x4A, 0x49, 0x49, 0x79,
                0x0E, 0x00, 0x70, 0x0F, 0x02, 0x01,
                0x61, 0x1E, 0x00, 0x3C, 0x42, 0xC1,
                0x41, 0x21, 0x02, 0x00, 0x30, 0x4A,
                0x49, 0x49, 0x79, 0x0E, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0xFF, 0xEA, 0xFF, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xF0, 0x0C, 0x04, 0x04, 0x04, 0x08,
                0xF0, 0x00, 0x00, 0xE0, 0x04, 0x80,
                0x40, 0x20, 0x20, 0x40, 0xE0, 0x00,
                0x00, 0xE0, 0x04, 0x20, 0xF8, 0x20,
                0x00, 0x00, 0x40, 0x20, 0x20, 0x21,
                0xC1, 0x00, 0x00, 0xE0, 0x1C, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                0xA8, 0x54, 0xAA, 0x7C, 0xAE, 0x6A,
                0xA9, 0x69, 0xA9, 0x69, 0xA9, 0x69,
                0xA9, 0x69, 0xA9, 0x69, 0xA9, 0x69,
                0xA9, 0x69, 0xA9, 0x69, 0xB9, 0x55,
                0xAB, 0x57, 0xAA, 0x54, 0x2A, 0x14,
                0x02, 0x00, 0x00, 0x00, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x0E,
                0x09, 0x08, 0x08, 0x08, 0x04, 0x06,
                0x01, 0x00, 0x0E, 0x41, 0x40, 0x47,
                0x48, 0x48, 0x28, 0x1E, 0x01, 0x00,
                0x0E, 0x01, 0x00, 0x0F, 0x08, 0x00,
                0x00, 0x06, 0x09, 0x09, 0x09, 0x0F,
                0x01, 0x00, 0x0C, 0x03, 0x00, 0x00,
                0x00, 0x00, 0x00, 0x00, 0x00, 0x00
                };


//
//  LCD Data & Control bits
//
sbit at 0x87 SCK;
sbit at 0x86 SDIN;
sbit at 0x85 DC;
sbit at 0x84 SCE;
sbit at 0x83 RESET;
sbit at 0x80 BACKLIT;

//sbit at 0x90 SCK;
//sbit at 0xA0 SDIN;
//sbit at 0xA1 DC;
//sbit at 0xA2 SCE;
//sbit at 0xA3 RESET;
//sbit at 0xA4 BACKLIT;

xdata unsigned char LCD_linecount;
xdata unsigned char LCD_charcount;


void lcd_initbus(void);
void lcd_wrcommand(unsigned char cmd);
void lcd_wrdata(unsigned char dat);
void lcd_clrscr(void);
void lcd_initmodule(void);
void lcd_on(void);
void lcd_off(void);
void lcd_reverse(void);
void lcd_normal(void);
void lcd_newline(void);
void lcd_goto(unsigned char x, unsigned char y);
void lcd_wrchar(unsigned char c);
void lcd_putchar(unsigned char c);
void lcd_putlogo(unsigned char tipo);
void lcd_backliton(void);
void lcd_backlitoff(void);


void lcd_initbus(void)
{
  RESET = 1;
  SCE = 1;
  SCK = 0;
  DC = 0;
  SDIN = 0;
  RESET = 0;
  delay(10);
  RESET = 1;
  delay(10);
}

void lcd_wrcommand(unsigned char cmd)
{
  unsigned char mask = 0x80;
  unsigned char i;

  SCE = 0;
  DC = 0;
  for (i=0; i<8; i++)
  {
    SDIN = (cmd & mask) ? 1: 0;
    SCK = 1;
    SCK = 0;
    mask >>= 1;
  }
  DC = 1;
  SCE = 1;
}

void lcd_wrdata(unsigned char dat)
{
  unsigned char mask = 0x80;
  unsigned char i;

  SCE = 0;
  DC = 1;
  for (i=0; i<8; i++)
  {
    SDIN = (dat & mask) ? 1: 0;
    SCK = 1;
    SCK = 0;
    mask >>= 1;
  }
  SCE = 1;
}

void lcd_clrscr(void)
{
  unsigned int i;

  lcd_wrcommand(0x40);
  lcd_wrcommand(0x80);
  for (i=0; i<504; i++)
  {
    lcd_wrdata(0x00);
  }
  lcd_wrcommand(0x40);
  lcd_wrcommand(0x80);

  LCD_linecount = 0;
  LCD_charcount = 0;
}

void lcd_initmodule(void)
{
  unsigned int i;

  lcd_wrcommand(0x21);
  lcd_wrcommand(0xC8);
  lcd_wrcommand(0x06);
  lcd_wrcommand(0x13);
  lcd_wrcommand(0x20);
  lcd_wrcommand(0x08);
  lcd_wrcommand(0x0C);

  lcd_wrcommand(0x40);
  lcd_wrcommand(0x80);
  for (i=0; i<504; i++)
  {
    lcd_wrdata(0x00);
  }
  lcd_wrcommand(0x40);
  lcd_wrcommand(0x80);

  LCD_linecount = 0;
  LCD_charcount = 0;
}

void lcd_on(void)
{
  lcd_wrcommand(0x0C);
}

void lcd_off(void)
{
  lcd_wrcommand(0x08);
}

void lcd_reverse(void)
{
  lcd_wrcommand(0x0D);
}

void lcd_normal(void)
{
  lcd_wrcommand(0x0C);
}

void lcd_newline(void)
{
  if (++LCD_linecount == LCD_NLINE) LCD_linecount = 0; 
  LCD_charcount = 0;
  lcd_wrcommand(0x40+LCD_linecount);
  lcd_wrcommand(0x80+LCD_charcount*6);
}

void lcd_goto(unsigned char x, unsigned char y)
{
  if (x > LCD_NCHAR-1) x = 0;
  if (y > LCD_NLINE-1) y = 0;

  LCD_charcount = x;
  LCD_linecount = y;
  lcd_wrcommand(0x40+LCD_linecount);
  lcd_wrcommand(0x80+LCD_charcount*6);
}

void lcd_wrchar(unsigned char c)
{
  unsigned int j;
  unsigned char i, v;

  j = (unsigned int) c * 5;
  for (i=0; i<5; i++)
  {
    v = asciitable[j];
    lcd_wrdata(v);
    j += 1;
  }
  lcd_wrdata(0x00);
}

void lcd_putchar(unsigned char c)
{
  switch (c)
  {
    case 13 : lcd_newline();
              break;
    case 10 : LCD_charcount = 0;
              lcd_goto(LCD_charcount, LCD_linecount);
              break;
    default : if (LCD_charcount++ < LCD_NCHAR) lcd_wrchar(c);
              else
              {
                lcd_newline();
                lcd_wrchar(c);
                LCD_charcount++;
              }
  }
}

void lcd_putlogo(unsigned char tipo)
{
  unsigned int i;
  
  switch (tipo)
  {
    case 0  : for (i=0; i<504; i++)
              {
                lcd_wrdata(slogan[i]);
              }
              break;
    case 1  : for (i=0; i<504; i++)
              {
                lcd_wrdata(logo[i]);
              }
              break;
    case 2  : for (i=0; i<504; i++)
              {
                lcd_wrdata(mapamundi[i]);
              }
              break;
    case 3  : for (i=0; i<504; i++)
              {
                lcd_wrdata(abertura[i]);
              }
              break;
    case 4  : for (i=0; i<504; i++)
              {
                lcd_wrdata(bal[i]);
              }
              break;
    default : for (i=0; i<504; i++)
              {
                lcd_wrdata(slogan[i]);
              }
  }
}
